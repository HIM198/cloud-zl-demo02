function initSelect2OfProduct(){var c=0;var e=true;$(".select2Product").each(function(){var g=$(this).attr("pvalue");if(g&&g!=""){e=false}});if(e){$(".select2Product").each(function(){var g=$(this).attr("pid");var j=$(this).attr("id");var h=$(this).attr("category");var i=$(this).attr("pvalue");if(g&&g!=undefined&&g!=""){$("#"+g).change(function(){var k=$(this).attr("category");b(j,h,k,$(this).val())})}else{d(j,h)}})}else{$(".select2Product").each(function(){var k=$(this).attr("pid");var g=$(this).attr("id");var h=$(this).attr("category");var i=$(this).attr("pvalue");if(i&&i!=""){if(k&&k!=undefined&&k!=""){var n=true;var l=g;var m=k;var p=h;var r=$("#"+m).attr("category");var o=i;while(n){if(m&&m!=undefined&&m!=""){}else{n=false}var j={category:p,pcategory:r,svalue:o,pageSize:-1};var q=a(j,l,o);$("#"+l).val(o).trigger("change");o=q;$("#"+m).attr("pvalue",o);l=$("#"+m).attr("id");m=$("#"+m).attr("pid");p=$("#"+l).attr("category");r=$("#"+m).attr("category")}}else{d(g,h,i)}}});$(".select2Product").each(function(){var g=$(this).attr("pid");var j=$(this).attr("id");var h=$(this).attr("category");var i=$(this).attr("pvalue");if(g&&g!=undefined&&g!=""){$("#"+g).change(function(){var k=$(this).attr("category");b(j,h,k,$(this).val(),"02");$("#"+j).trigger("change")})}else{}})}function d(j,g,i){var h={category:g,pageSize:-1};if($("#"+j).attr("viewflag")){h.viewflag=$("#"+j).attr("viewflag")}if($("#"+j).attr("type")){h.type=$("#"+j).attr("type")}f(h,j,i)}function b(i,j,l,o,h,n){var g="";if(o instanceof Array){g=o.join(",")}else{g=o}var k="";if(h instanceof Array){k=h.join(",")}else{k=h}var m={category:j,pageSize:-1,pcategory:l,pval:g,svalue:h,flag:n};f(m,i,h)}function a(g,j,h){if($("#"+j).attr("viewflag")){g.viewflag=$("#"+j).attr("viewflag")}if($("#"+j).attr("type")){g.type=$("#"+j).attr("type")}if($("#"+j).attr("flag")){g.flag=$("#"+j).attr("flag")}var i="";$.ajax({async:false,type:"POST",data:g,url:ctp+"/product/getSelect2ProductPage",success:function(k){if(k.success){$("#"+j).html("");$("#"+j).select2({placeholder:"请选择",allowClear:true,data:k.data});if(h){}else{h=""}i=k.message}}});return i}function f(g,i,h){if($("#"+i).attr("viewflag")){g.viewflag=$("#"+i).attr("viewflag")}if($("#"+i).attr("type")){g.type=$("#"+i).attr("type")}$.ajax({async:true,type:"POST",data:g,url:ctp+"/product/getProductByPCategory",success:function(j){if(j.success){$("#"+i).html("");$("#"+i).select2({placeholder:"请选择",allowClear:true,data:j.data});if(h){}else{h=""}$("#"+i).val(h).trigger("change")}}})}}function initSelect2OfProductDyc(){var c=0;var e=true;$(".select2Product").each(function(){var g=$(this).attr("pvalue");if(g&&g!=""){e=false}});if(e){$(".select2Product").each(function(){if($(this).hasClass("select2-hidden-accessible")){}else{var g=$(this).attr("pid");var j=$(this).attr("id");var h=$(this).attr("category");var i=$(this).attr("pvalue");if(g&&g!=undefined&&g!=""){$("#"+g).change(function(){var k=$(this).attr("category");b(j,h,k,$(this).val())})}else{d(j,h)}}})}else{$(".select2Product").each(function(){if($(this).hasClass("select2-hidden-accessible")){}else{var k=$(this).attr("pid");var g=$(this).attr("id");var h=$(this).attr("category");var i=$(this).attr("pvalue");if(i&&i!=""){if(k&&k!=undefined&&k!=""){var n=true;var l=g;var m=k;var p=h;var r=$("#"+m).attr("category");var o=i;while(n){if(m&&m!=undefined&&m!=""){}else{n=false}var j={category:p,pcategory:r,svalue:o,pageSize:-1};var q=a(j,l,o);$("#"+l).val(o).trigger("change");o=q;$("#"+m).attr("pvalue",o);l=$("#"+m).attr("id");m=$("#"+m).attr("pid");p=$("#"+l).attr("category");r=$("#"+m).attr("category")}}else{d(g,h,i)}}}});$(".select2Product").each(function(){if($(this).hasClass("select2-hidden-accessible")){}else{var g=$(this).attr("pid");var j=$(this).attr("id");var h=$(this).attr("category");var i=$(this).attr("pvalue");if(g&&g!=undefined&&g!=""){$("#"+g).change(function(){var k=$(this).attr("category");b(j,h,k,$(this).val(),"02");$("#"+j).trigger("change")})}else{}}})}function d(j,g,i){var h={category:g,pageSize:-1};if($("#"+j).attr("viewflag")){h.viewflag=$("#"+j).attr("viewflag")}if($("#"+j).attr("type")){h.type=$("#"+j).attr("type")}f(h,j,i)}function b(i,j,l,o,h,n){var g="";if(o instanceof Array){g=o.join(",")}else{g=o}var k="";if(h instanceof Array){k=h.join(",")}else{k=h}var m={category:j,pageSize:-1,pcategory:l,pval:g,svalue:h,flag:n};f(m,i,h)}function a(g,j,h){if($("#"+j).attr("viewflag")){g.viewflag=$("#"+j).attr("viewflag")}if($("#"+j).attr("type")){g.type=$("#"+j).attr("type")}if($("#"+j).attr("flag")){g.flag=$("#"+j).attr("flag")}var i="";$.ajax({async:false,type:"POST",data:g,url:ctp+"/product/getSelect2ProductPage",success:function(k){if(k.success){$("#"+j).html("");$("#"+j).select2({placeholder:"请选择",allowClear:true,data:k.data});if(h){}else{h=""}i=k.message}}});return i}function f(g,i,h){if($("#"+i).attr("viewflag")){g.viewflag=$("#"+i).attr("viewflag")}if($("#"+i).attr("type")){g.type=$("#"+i).attr("type")}$.ajax({async:true,type:"POST",data:g,url:ctp+"/product/getProductByPCategory",success:function(j){if(j.success){$("#"+i).html("");$("#"+i).select2({placeholder:"请选择",allowClear:true,data:j.data});if(h){}else{h=""}$("#"+i).val(h).trigger("change")}}})}}function initSelect2OfArea(){$(".select2Province").each(function(){var h=$(this).attr("id");var f=$("#"+h).attr("pvalue");var d=$(this).attr("stype");if(d){}else{d=""}b(h,f,d);var g=$(this).attr("sid");if(g&&g!=""){$(this).change(function(){var i=$("#"+g).attr("pvalue");a($(this).val(),g,i)});a("",g,"");var e=$("#"+g).attr("sid");if(e&&e!=""){$("#"+g).change(function(){var i=$("#"+e).attr("pvalue");c($(this).val(),e,i)});c("",e,"")}}});function b(f,e,d){$.ajax({async:true,type:"POST",url:ctp+"/selectOption/getPrivice",data:"type="+d,success:function(g){$("#"+f).html("<option value=''>请选择</option>");$("#"+f).select2({placeholder:"请选择",allowClear:true,data:g});if(e){}else{e=""}$("#"+f).val(e).trigger("change")}})}function a(g,d,f){if(g==null||g==""){$("#"+d).html("<option value=''>请先选择省份</option>");$("#"+d).select2({placeholder:"请先选择省份",allowClear:true});return false}var e=$("#"+d).attr("stype");$.ajax({async:true,type:"POST",data:"provinceId="+g+"&type="+e,url:ctp+"/selectOption/getCityByProvinceId",success:function(h){$("#"+d).html("<option value=''>请选择</option>");$("#"+d).select2({placeholder:"请选择",allowClear:true,data:h});if(f){}else{f=""}$("#"+d).val(f).trigger("change")}})}function c(g,d,f){if(g==null||g==""){$("#"+d).html("<option value=''>请先选择城市</option>");$("#"+d).select2({placeholder:"请先选择城市",allowClear:true});return false}var e=$("#"+d).attr("stype");$.ajax({async:true,type:"POST",data:"cityId="+g+"&type="+e,url:ctp+"/selectOption/getCountyByCityId",success:function(h){$("#"+d).html("<option value=''>请选择</option>");$("#"+d).select2({placeholder:"请选择",allowClear:true,data:h});if(f){}else{f=""}$("#"+d).val(f).trigger("change")}})}}function initSelect2OfAreaDyc(){$(".select2Province").each(function(){if($(this).hasClass("select2-hidden-accessible")){}else{var h=$(this).attr("id");var f=$("#"+h).attr("pvalue");var d=$(this).attr("stype");if(d){}else{d=""}b(h,f,d);var g=$(this).attr("sid");if(g&&g!=""){$(this).change(function(){var i=$("#"+g).attr("pvalue");a($(this).val(),g,i)});a("",g,"");var e=$("#"+g).attr("sid");if(e&&e!=""){$("#"+g).change(function(){var i=$("#"+e).attr("pvalue");c($(this).val(),e,i)});c("",e,"")}}}});function b(f,e,d){$.ajax({async:true,type:"POST",url:ctp+"/selectOption/getPrivice",data:"type="+d,success:function(g){$("#"+f).html("<option value=''>请选择</option>");$("#"+f).select2({placeholder:"请选择",allowClear:true,data:g});if(e){}else{e=""}$("#"+f).val(e).trigger("change")}})}function a(g,d,f){if(g==null||g==""){$("#"+d).html("<option value=''>请先选择省份</option>");$("#"+d).select2({placeholder:"请先选择省份",allowClear:true});return false}var e=$("#"+d).attr("stype");$.ajax({async:true,type:"POST",data:"provinceId="+g+"$type="+e,url:ctp+"/selectOption/getCityByProvinceId",success:function(h){$("#"+d).html("<option value=''>请选择</option>");$("#"+d).select2({placeholder:"请选择",allowClear:true,data:h});if(f){}else{f=""}$("#"+d).val(f).trigger("change")}})}function c(g,d,f){if(g==null||g==""){$("#"+d).html("<option value=''>请先选择城市</option>");$("#"+d).select2({placeholder:"请先选择城市",allowClear:true});return false}var e=$("#"+d).attr("stype");$.ajax({async:true,type:"POST",data:"cityId="+g+"$type="+e,url:ctp+"/selectOption/getCountyByCityId",success:function(h){$("#"+d).html("<option value=''>请选择</option>");$("#"+d).select2({placeholder:"请选择",allowClear:true,data:h});if(f){}else{f=""}$("#"+d).val(f).trigger("change")}})}}function initApprovalResult(){$(".approval-view-div").each(function(){var a=$(this).attr("requestId");$(this).load(ctp+"/core/approval/result/viewDiv?excludes=1&requestId="+a)})}function initJsSwitch(){var b={color:"#64bd63",secondaryColor:"#dfdfdf",jackColor:"#fff",jackSecondaryColor:null,className:"switchery",disabled:false,disabledOpacity:0.5,speed:"0s",size:"small"};var a=Array.prototype.slice.call(document.querySelectorAll(".js-switch"));a.forEach(function(c){var d=new Switchery(c,b)})}function initDatatableSetting(){$(".datatable_set_but").click(function(){var a=$(this).attr("dtid");$.openSettingDatatablesColumns(a)});$(".datatable_set_but_report").click(function(){var a=$(this).attr("dtid");$.openSettingDatatablesReportColumns(a)})}function initApproval(){$(".approval-conmmon").each(function(){var a=$(this).attr("requestId");var b=$(this).attr("approvalFormId");$(this).load(ctp+"/approval/approvalCommonForm?excludes=1&requestId="+a+"&approvalFormId="+b)})}function frameInit(){$.ajaxSetup({timeout:900000,cache:false});try{if(getMfalg()==1){change_layout("sidebar-collapse")}}catch(d){}try{if(menus_mids&&menus_mids!=""){var c=menus_mids.split(",");if(c!=null&&c.length>0){var a=c.length-1;var b=$(".content-wrapper").height();var f=0;while(a>=0){var e=c[a];$("a[mid='"+e+"']").each(function(){$(this).parent("li").addClass("active");var g=$(this).parent("li").find(".treeview-menu").height();if(g&&g!=null){f+=g}});a=a-1}if(f>0){$(".content-wrapper").css("min-height",b+f)}}}}catch(d){}$("a[mid]").on("click",function(){if($(this).attr("url")){if($(this).attr("url")!=""&&$(this).attr("url")!="###"){bloadMask();var j=$(this).attr("mid");var h=true;var k=""+j;var l=$(this);var g=0;while(h&&g<3){l=l.parent().parent().prev("a[mid]");if(l.attr("mid")){k=l.attr("mid")+","+k}else{h=false}g++}var i=$(this).attr("url");ajaxtestT(ctp+"/sitemids","mids="+k,function(m){if(m.success){eduLoadMask(i)}else{msgShowN(t_alert_title,"会话失效请登录后操作！",1);eduLoadMask(i)}})}}else{if($(this).attr("href")!=""&&$(this).attr("href")!="###"){bloadMask();var j=$(this).attr("mid");var h=true;var k=""+j;var l=$(this);var g=0;while(h&&g<3){l=l.parent().parent().prev("a[mid]");if(l.attr("mid")){k=l.attr("mid")+","+k}else{h=false}g++}var i=$(this).attr("href");ajaxtestT(ctp+"/sitemids","mids="+k,function(m){if(m.success){eduLoadMask(i)}else{msgShowN(t_alert_title,"会话失效请登录后操作！",1);eduLoadMask(i)}})}}});formatSelect2();validateFormSubmit();validateFrom();formRest();formTablelistStyle();initDefault_datatable();$(".i-checks").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green",});try{bbUnloadMask()}catch(d){}$(window).resize(function(){$.each($.fn.dataTable.tables(true),function(){$(this).DataTable().columns.adjust()})})}function checkBrowserInit(){var b=navigator.userAgent;if(b.indexOf("MSIE")>=0){}else{if(b.indexOf("Firefox")>=0){}else{if(b.indexOf("Chrome")>=0){}else{if(b.indexOf("Opera")>=0){}else{if(b.indexOf("Safari")>=0){$("body").width($("body").width());try{var a=parent.layer.getFrameIndex(window.name);if(a&&a!=null){if($(document.body).height()>600){$("section").css("overflow","auto");$("section").css("overflow-x","auto");$("section").height(600);parent.layer.iframeAuto(a)}}}catch(c){}$("body").css({"-webkit-overflow-scrolling":"touch",overflow:"auto","overflow-x":"auto"})}else{if(b.indexOf("Netscape")>=0){alert("Netscape")}}}}}}}$(document).ready(function(){checkBrowserInit();if(WebSite_Flag&&WebSite_Flag==2){$(".selectForm_dt").first().parents(".box").first().find("h3.box-title").first().html("");$(".selectForm_dt").first().parents(".box").first().addClass("box-solid")}layui.use("layer",function(){var b=layui.layer;var a=b.load();b.close(a)});frameInit();initSelect2OfArea();initApprovalResult();initSelect2OfProduct();initJsSwitch();initDatatableSetting();initApproval()});